{
    "info": {
      "name": "Claims Service",
      "_postman_id": "b3f32d5e-8d7b-4c3c-9a5b-123456789abc",
      "description": "REST-API-Tests f√ºr den Claims-Service",
      "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
      {
        "name": "1) Create Claim",
        "request": {
          "method": "POST",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"policyId\": \"11111111-1111-1111-1111-111111111111\",\n  \"customerId\": \"22222222-2222-2222-2222-222222222222\",\n  \"description\": \"Sturmschaden am Dach\",\n  \"reportedAmount\": 3500.0\n}"
          },
          "url": {
            "raw": "{{baseUrl}}/claims",
            "host": [
              "{{baseUrl}}"
            ],
            "path": [
              "claims"
            ]
          }
        },
        "event": [
          {
            "listen": "test",
            "script": {
              "exec": [
                "pm.test(\"Status code is 201\", function () {",
                "    pm.response.to.have.status(201);",
                "});",
                "",
                "// Claim-ID aus der Antwort speichern",
                "var jsonData = pm.response.json();",
                "if (jsonData && jsonData.id) {",
                "    pm.collectionVariables.set(\"claimId\", jsonData.id);",
                "}"
              ],
              "type": "text/javascript"
            }
          }
        ]
      },
      {
        "name": "2) Get Claim by ID",
        "request": {
          "method": "GET",
          "header": [],
          "url": {
            "raw": "{{baseUrl}}/claims/{{claimId}}",
            "host": [
              "{{baseUrl}}"
            ],
            "path": [
              "claims",
              "{{claimId}}"
            ]
          }
        }
      },
      {
        "name": "3) Get Claims for Customer",
        "request": {
          "method": "GET",
          "header": [],
          "url": {
            "raw": "{{baseUrl}}/claims?customerId=22222222-2222-2222-2222-222222222222",
            "host": [
              "{{baseUrl}}"
            ],
            "path": [
              "claims"
            ],
            "query": [
              {
                "key": "customerId",
                "value": "22222222-2222-2222-2222-222222222222"
              }
            ]
          }
        }
      },
      {
        "name": "4) Approve Claim",
        "request": {
          "method": "POST",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"approvedAmount\": 3000.0,\n  \"reason\": \"Teilregulierung nach Gutachten\"\n}"
          },
          "url": {
            "raw": "{{baseUrl}}/claims/{{claimId}}/approve",
            "host": [
              "{{baseUrl}}"
            ],
            "path": [
              "claims",
              "{{claimId}}",
              "approve"
            ]
          }
        }
      },
      {
        "name": "5) Reject Claim",
        "request": {
          "method": "POST",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mode": "raw",
            "raw": "{\n  \"reason\": \"Schaden nicht gedeckt\"\n}"
          },
          "url": {
            "raw": "{{baseUrl}}/claims/{{claimId}}/reject",
            "host": [
              "{{baseUrl}}"
            ],
            "path": [
              "claims",
              "{{claimId}}",
              "reject"
            ]
          }
        }
      },
      {
        "name": "6) Mark Claim as Paid Out",
        "request": {
          "method": "POST",
          "header": [],
          "url": {
            "raw": "{{baseUrl}}/claims/{{claimId}}/paid-out",
            "host": [
              "{{baseUrl}}"
            ],
            "path": [
              "claims",
              "{{claimId}}",
              "paid-out"
            ]
          }
        }
      }
    ],
    "variable": [
      {
        "key": "baseUrl",
        "value": "http://localhost:8080"
      },
      {
        "key": "claimId",
        "value": ""
      }
    ]
  }
  